extends layout

block script
  script(type="text/javascript").
    $(document).on("click", ".event-row", function() {
      window.location.href = "/event?id=" + $(this).attr("id");
    });

    $(document).ready(function() {
      var eventToHtmlObject = function(event) {
        console.log(event);
        var row = $("<div class='row event-row'>").attr("id", event.id);
        var col = $("<div class='event-col col-sm-10 col-sm-offset-1'>");
        var title = $("<div>").addClass("col-sm-8").text(event.title);
        //- var host = $("<div>").addClass("col-sm-8 small").text(event.host.username.toUpperCase());
        var host = $("<div>").addClass("col-sm-8 small").text("smb");
        var place = $("<div>").addClass("col-sm-4 small").text(event.place);

        var dateStr = event.date.toString().slice(0, 16).replace("T", " ");
        var date = $("<div>").addClass("col-sm-4 small").text(dateStr);

        col.append(title).append(place).append(host).append(date);
        row.append(col);

        return row;
      }

      var events = !{events};
      for (var i = 0; i < events.length; ++i)
        $("#eventsContainer").append(eventToHtmlObject(events[i]));
    });

block content
  div(id="eventsContainer", class="container")